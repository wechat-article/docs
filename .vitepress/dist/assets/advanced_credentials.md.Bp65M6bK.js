import{_ as a,c as i,o as r,af as t,j as o}from"./chunks/framework.C0xjJjYj.js";const s="/assets/mitmweb.CLU8JnMC.png",l="/assets/mitm-flow-list-init.DI6BS_QH.png",n="/assets/mitm-proxy-setting-not-correct.CyRxdIjf.png",p="/assets/mitm-cert.ffMp6GHa.png",m="/assets/mitm-flow-list.DFOjVS8A.png",d="/assets/open-in-wechat.S65owj6v.png",c="/assets/mitm-flow-list-request-url.D4SDSwG_.png",_="/assets/credential-setting.DIAOVUtH.png",g="/assets/credential-keymap.Ciob0xji.png",h="/assets/credential-setting-final.DBIgD9f4.png",w=JSON.parse('{"title":"如何获取 Credentials 信息","description":"","frontmatter":{},"headers":[],"relativePath":"advanced/credentials.md","filePath":"advanced/credentials.md","lastUpdated":1740452991000}'),u={name:"advanced/credentials.md"};function b(f,e,y,x,z,k){return r(),i("div",null,e[0]||(e[0]=[t('<h1 id="如何获取-credentials-信息" tabindex="-1">如何获取 Credentials 信息 <a class="header-anchor" href="#如何获取-credentials-信息" aria-label="Permalink to &quot;如何获取 Credentials 信息&quot;">​</a></h1><p><code>Credentials</code>即微信用户的个人凭证，是获取文章的评论和阅读量等数据所必需的。下面说明如何使用 <a href="https://mitmproxy.org/" target="_blank" rel="noreferrer">mitmproxy</a> 获取该数据：</p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>Credentials 的有效期大概为30分钟，推荐在下载文章的时候重新获取。</p></div><h2 id="视频版" tabindex="-1">视频版 <a class="header-anchor" href="#视频版" aria-label="Permalink to &quot;视频版&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">提示</p><p>视频里面没有包含 mitmproxy 的安装</p></div>',5),o("iframe",{src:"//player.bilibili.com/player.html?isOutside=true&aid=114169793741807&bvid=BV1umQxYtE8z&cid=28888862331&p=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",style:{width:"100%",height:"400px"}},null,-1),t('<h2 id="文字版" tabindex="-1">文字版 <a class="header-anchor" href="#文字版" aria-label="Permalink to &quot;文字版&quot;">​</a></h2><h3 id="_1-安装-mitmproxy" tabindex="-1">1. 安装 <code>mitmproxy</code> <a class="header-anchor" href="#_1-安装-mitmproxy" aria-label="Permalink to &quot;1. 安装 `mitmproxy`&quot;">​</a></h3><p>按照官方的 <a href="https://docs.mitmproxy.org/stable/overview-installation/" target="_blank" rel="noreferrer">安装教程</a> 在你的系统上安装该工具。</p><h3 id="_2-配置-mitmproxy" tabindex="-1">2. 配置 <code>mitmproxy</code> <a class="header-anchor" href="#_2-配置-mitmproxy" aria-label="Permalink to &quot;2. 配置 `mitmproxy`&quot;">​</a></h3><p>在控制台启动<code>mitmweb</code>，如下所示:</p><p><img src="'+s+'" alt="启动 mitmweb" data-zoomable="true" loading="lazy"></p><p>该命令会自动打开浏览器，展示抓包列表界面(后面会用到)：</p><p><img src="'+l+'" alt="mitm 抓包界面" data-zoomable="true" loading="lazy"></p><p>从控制台可以看到<code>mitmproxy</code>命令启动了一个代理服务器，地址为<code>127.0.0.1:8080</code>，我们将浏览器或系统的代理设置为<code>127.0.0.1:8080</code>，然后浏览器访问 <a href="http://mitm.it/" target="_blank" rel="noreferrer">http://mitm.it/</a></p><p>如果显示的是下面的界面，则说明系统代理设置有误:</p><p><img src="'+n+'" alt="mitm-proxy-setting-not-correct" data-zoomable="true" loading="lazy"></p><p>如果系统的代理设置正确，则会出现下面的界面(提示安装证书):</p><p><img src="'+p+'" alt="mitm-cert" data-zoomable="true" loading="lazy"></p><p>下载对应系统的证书文件并安装进系统中。证书安装之后，<code>mitmproxy</code>的配置就完成了。</p><h3 id="_3-抓取-credentials" tabindex="-1">3. 抓取 Credentials <a class="header-anchor" href="#_3-抓取-credentials" aria-label="Permalink to &quot;3. 抓取 Credentials&quot;">​</a></h3><p>重启<code>mitmweb</code>，然后浏览器打开抓包页面，搜索过滤器设置为:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>~u ^https:\\/\\/mp\\.weixin\\.qq\\.com\\/s\\?__biz=</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如下图所示：</p><p><img src="'+m+'" alt="mitm-flow-list" data-zoomable="true" loading="lazy"></p><p>用电脑端微信打开 <strong>目标公众号</strong> 的任意一篇文章，如下图所示:</p><p><img src="'+d+'" alt="open-in-wechat" data-zoomable="true" loading="lazy"></p><p>然后从<code>mitmproxy</code>拦截的请求中找到该请求，复制请求路径并粘贴进系统中:</p><p><img src="'+c+'" alt="mitm-flow-list-request-url" data-zoomable="true" loading="lazy"></p><p><img src="'+_+'" alt="credential-setting" data-zoomable="true" loading="lazy"></p><p>如果复制的请求地址没有自动解析出右边的4个字段，则可以手动填写这些信息，对应关系如下图所示：</p><p><img src="'+g+'" alt="credential-keymap" data-zoomable="true" loading="lazy"></p><p>填写完毕之后记得保存。</p><p>这样在下载文章的时候就可以同时拉取留言数据和阅读量、转发量、点赞量、在看量数据啦。</p><p><img src="'+h+'" alt="credential-setting-final" data-zoomable="true" loading="lazy"></p>',29)]))}const C=a(u,[["render",b]]);export{w as __pageData,C as default};
